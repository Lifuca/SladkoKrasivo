<?php
defined('ABSPATH') || exit;
echo '<div style="position:fixed;top:90px;left:10px;z-index:999999;background:#0ea5e9;color:#fff;padding:8px 10px;border-radius:10px;font:12px Arial">LR archive-product.php ACTIVE</div>';

get_header();
?>

<main class="lr-main lr-shop">
  <div class="lr-container">

    <?php
    do_action('woocommerce_before_main_content');

    // описание категории/магазина (если заполнено)
    do_action('woocommerce_archive_description');

    if (woocommerce_product_loop()) {

      echo '<header class="lr-shop__head">';

      if (apply_filters('woocommerce_show_page_title', true)) {
        echo '<h1 class="lr-shop__title">' . esc_html(woocommerce_page_title(false)) . '</h1>';
      }

      echo '<div class="lr-shop__controls">';
      woocommerce_catalog_ordering();
      echo '</div>';

      echo '</header>';

      echo '<div class="lr-shop__meta">';
      woocommerce_result_count();
      echo '</div>';

      // Важно: стандартные обёртки Woo (ul.products > li.product)
      woocommerce_product_loop_start();

      while (have_posts()) {
        the_post();
        do_action('woocommerce_shop_loop');
        wc_get_template_part('content', 'product');
      }

      woocommerce_product_loop_end();

      do_action('woocommerce_after_shop_loop');

    } else {
      do_action('woocommerce_no_products_found');
    }

    do_action('woocommerce_after_main_content');
    ?>

  </div>
</main>

<?php get_footer(); ?>
